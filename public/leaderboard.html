<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Leaderboard</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    li { margin-bottom: 8px; }
    .loading { color: #666; }
    .error { color: #a00; }
    .meta { color: #666; font-size: 0.9em; margin-bottom: 12px; }
  </style>
</head>
<body>
  <h2>Leaderboard</h2>
  <div id="status" class="loading">Loading…</div>
  <div class="meta">Shows top users by points (read-only).</div>
  <ol id="list"></ol>

  <script>
    async function loadTop(limit = 50) {
      const status = document.getElementById('status');
      try {
        const res = await fetch('/api/leaderboard/top?limit=' + limit);
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const json = await res.json();
        const list = document.getElementById('list');
        list.innerHTML = '';
        (json.data || []).forEach(e => {
          const li = document.createElement('li');
          const name = e.username || e.userId || 'Anonymous';
          li.textContent = name + ' — ' + (e.points || 0) + ' points' + (e.walletAddress ? ' (wallet set)' : '');
          list.appendChild(li);
        });
        status.textContent = '';
      } catch (err) {
        console.error(err);
        status.textContent = 'Failed to load leaderboard';
        status.className = 'error';
      }
    }

    loadTop();
  </script>
</body>
</html>